<!DOCTYPE html>
<html lang="zh-Hans">
<head><!-- hexo injector head_begin start -->
<link rel="stylesheet" href="/css/bilicard.css">
<link href="https://cdn.jsdelivr.net/npm/hexo-tag-common@0.0.5/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end -->
    <!-- // é€šè¿‡jsDelivrçš„CDNå¼•å…¥echarts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@4.8.0/dist/echarts.min.js"></script>
    <!-- // ä½¿ç”¨GLé‡Œçš„å„ç§ç»„ä»¶æ—¶éœ€è¦æ·»åŠ ï¼Œå¦åˆ™å¯ä¸éœ€è¦ -->
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl@1.1.1/dist/echarts-gl.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- <script type="text/javascript" src="/js/texture.js"></script>
    <script type="text/javascript" src="/js/rose.js"></script> -->

    <meta charset="utf-8">
    <meta name="baidu-site-verification" content="code-WK4Q1HDzQk" />
    <meta name="google-site-verification" content="WV6BOVs7NRg-qgcovrSAgXFDsh8DNfm-siq4aTBYSb0" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="xiao ming">
    
    <title>
        
            OpenGL with Xmake |
        
        Silhouettes For You
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/breaking-bad-logo.png">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"silhouettesforyou.github.io","root":"/","language":"zh-Hans","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.jpg","favicon":"/images/breaking-bad-logo.png","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":false,"background_img":"/images/bg.svg","description":null},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
    
<style type="text/css">
.spoiler {
  display: inline;
}
p.spoiler {
  display: flex;
}
.spoiler a {
  pointer-events: none;
}
.spoiler-blur, .spoiler-blur > * {
  transition: text-shadow .5s ease;
}
.spoiler .spoiler-blur, .spoiler .spoiler-blur > * {
  color: rgba(0, 0, 0, 0);
  background-color: rgba(0, 0, 0, 0);
  text-shadow: 0 0 10px grey;
  cursor: pointer;
}
.spoiler .spoiler-blur:hover, .spoiler .spoiler-blur:hover > * {
  text-shadow: 0 0 5px grey;
}
.spoiler-box, .spoiler-box > * {
  transition: color .5s ease,
  background-color .5s ease;
}
.spoiler .spoiler-box, .spoiler .spoiler-box > * {
  color: black;
  background-color: black;
  text-shadow: none;
}</style><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Silhouettes For You" type="application/atom+xml">
</head>



<!--åŠ¨æ€çº¿æ¡èƒŒæ™¯-->
<script type="text/javascript" color="220,220,220" opacity='0.7' zIndex="0.5" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        
        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Silhouettes For You
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/lover"
                            >
                                LOVER
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/lover">LOVER</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">OpenGL with Xmake</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">xiao ming</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2024-06-20 21:32:21
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Learning-OpenGL/">Learning OpenGL</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/OpenGL/">OpenGL</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">å›¾å½¢å­¦</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>3.4k Words</span>
        </span>
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><center>
    <img src="/2024/06/20/58/opengl-libraries.png">
</center>

<span id="more"></span>

<h3 id="ç›®å½•ç»“æ„"><a href="# ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>ğŸ”½dependence <br><br>&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸glew-2.1.0 <br><br>&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸glfw-3.4.bin.WIN32 <br><br>&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸glfw-3.4.bin.WIN64 <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸include <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸â€¦ <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸lib-static-ucrt <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸glfw3.dll <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸glfw3dll.dll <br><br>ğŸ”½src <br><br> &nbsp;&nbsp;&nbsp;&nbsp;â–¶ï¸main.cpp <br><br>â–¶ï¸xmake.lua <br></p>
<h3 id="xmake- é…ç½®"><a href="#xmake- é…ç½®" class="headerlink" title="xmake é…ç½®"></a>xmake é…ç½®</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">set_project(<span class="string">&quot;OpenGL Tutorial&quot;</span>)</span><br><span class="line">add_rules(<span class="string">&quot;mode.debug&quot;</span>, <span class="string">&quot;mode.release&quot;</span>)</span><br><span class="line"></span><br><span class="line">target(<span class="string">&quot;HelloOpenGL&quot;</span>)</span><br><span class="line">    set_kind(<span class="string">&quot;binary&quot;</span>)</span><br><span class="line">    add_files(<span class="string">&quot;src/*.cpp&quot;</span>)</span><br><span class="line">    add_includedirs(<span class="string">&quot;/dependence/glfw-3.4.bin.WIN64/include&quot;</span>) <span class="comment">-- include æ–‡ä»¶</span></span><br><span class="line">    add_includedirs(<span class="string">&quot;/dependence/glew-2.1.0/include&quot;</span>)</span><br><span class="line">    add_linkdirs(<span class="string">&quot;/dependence/glfw-3.4.bin.WIN64/lib-static-ucrt&quot;</span>) <span class="comment">-- gcc ç¼–è¯‘çš„é™æ€é“¾æ¥åº“ç›®å½•</span></span><br><span class="line">    add_linkdirs(<span class="string">&quot;/dependence/glew-2.1.0/lib/Release/Win32&quot;</span>)</span><br><span class="line">    add_linkdirs(<span class="string">&quot;/dependence/glew-2.1.0/bin/Release/x64&quot;</span>)</span><br><span class="line">    add_links(<span class="string">&quot;glfw3dll&quot;</span>, <span class="string">&quot;glew32&quot;</span>) <span class="comment">-- é“¾æ¥ glfw å’Œ glew</span></span><br><span class="line">    add_syslinks(<span class="string">&quot;opengl32&quot;</span>) <span class="comment">-- é“¾æ¥ç³»ç»Ÿåº“</span></span><br></pre></td></tr></table></figure>

<h3 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h3><ul>
<li>é¡¶ç‚¹ç€è‰²å™¨<ul>
<li>æ¯ä¸ªé¡¶ç‚¹è¿è¡Œä¸€æ¬¡</li>
<li>ç¡®å®šä½ç½®</li>
</ul>
</li>
<li>ç‰‡æ®µ / åƒç´ ç€è‰²å™¨<ul>
<li>å¡«å……ä¸‰è§’å½¢çš„æ¯ä¸ªåƒç´ è®¡ç®—ä¸€æ¬¡</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆç´¢å¼•ç¼“å†²æ˜¯ <code>unsigned int</code> æ— ç¬¦å·çš„</li>
<li>é”™è¯¯å¤„ç†<ul>
<li><code>glGetError</code></li>
<li>å®å®šä¹‰</li>
</ul>
</li>
<li>uniform å˜é‡</li>
<li>VAO vertex array object<ul>
<li>å½“ç©ºé—´ä¸­æœ‰å¤šä¸ªå¯¹è±¡ã€ç½‘æ ¼ã€é¡¶ç‚¹ç¼“å†²åŒºç­‰ï¼Œæ¯ä¸ªéƒ½è¦è¿›è¡Œç»‘å®šç€è‰²å™¨ã€<strong>ç»‘å®šé¡¶ç‚¹ç¼“å†²åŒº </strong>ã€<strong> è®¾ç½®é¡¶ç‚¹å¸ƒå±€ </strong>ã€<strong> ç»‘å®šç´¢å¼•ç¼“å†²åŒº</strong>ã€è°ƒç”¨ DrawCall è¿›è¡Œç»˜åˆ¶</li>
<li>ç»‘å®šé¡¶ç‚¹ç¼“å†²åŒºä¹‹åè¿˜è¦å£°æ˜é¡¶ç‚¹ç¼“å†²åŒºçš„å¸ƒå±€ï¼Œä¸åŒçš„é¡¶ç‚¹ç¼“å†²åŒºæœ‰ä¸åŒçš„å¸ƒå±€</li>
<li>å®é™…ä¸Šéƒ½æ˜¯å’Œ VAO æœ‰å…³ç³»</li>
<li>VAO å®ƒå°†æ‰€æœ‰é¡¶ç‚¹ç»˜åˆ¶è¿‡ç¨‹ä¸­çš„è¿™äº›è®¾ç½®å’Œç»‘å®šè¿‡ç¨‹é›†ä¸­å­˜å‚¨åœ¨ä¸€èµ·</li>
<li>VAO æ˜¯å¦ç”Ÿæ•ˆç”±é…ç½®æ–‡ä»¶ç±»å‹å†³å®šçš„ The compalibility profile makes VAO object 0 a default object. The core OpenGL profile makes VAO object 0 not an object at all</li>
<li>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ VAO<ul>
<li>å¦‚æœä½¿ç”¨æ ¸å¿ƒé…ç½®ï¼Œå°±å¿…é¡»ä½¿ç”¨è‡ªå®šä¹‰çš„ VAO</li>
<li>å¦‚æœåªä½¿ç”¨å…¼å®¹æ€§é…ç½®ï¼Œæœ‰ä¸€ä¸ªé»˜è®¤çš„ VAO</li>
</ul>
</li>
</ul>
</li>
<li>ç€è‰²å™¨å¤„ç†çš„æ­¥éª¤<ul>
<li>ä¼ å…¥æ–‡ä»¶æˆ–è€…å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç¼–è¯‘ä¸ºç€è‰²å™¨</li>
<li>ç»‘å®šå’Œè§£ç»‘ç€è‰²å™¨</li>
<li>å¯ä»¥è®¾ç½®ç€è‰²å™¨ä¸­çš„ä¸åŒçš„<code>uniform</code></li>
</ul>
</li>
<li>æ¸²æŸ“å™¨ç±»<ul>
<li>è°ƒç”¨ Draw Call æ—¶éœ€è¦é¡¶ç‚¹æ•°ç»„ã€ç´¢å¼•ç¼“å†²åŒºã€ç€è‰²å™¨</li>
<li>è§£ç»‘ä¸æ˜¯å¿…è¦çš„ï¼Œè§£ç»‘åªä¼šæµªè´¹æ€§èƒ½</li>
<li>æ­£å¸¸ä¼šç”¨æè´¨æ›¿æ¢ç€è‰²å™¨</li>
</ul>
</li>
<li>å¦‚ä½•é€šè¿‡ OpenGL å°†ç¡¬ç›˜ä¸­çš„ png å›¾ç‰‡æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼ˆpng å¹¶ä¸æ˜¯å¼•æ“ç›´æ¥ä½¿ç”¨çš„æ ¼å¼ï¼Œå¤§å¤šæ•°å¼•æ“éƒ½æœ‰è‡ªå·±çš„çº¹ç†æ ¼å¼ï¼‰<ul>
<li>å°†å›¾åƒåŠ è½½åˆ°å†…å­˜ä¸­â€”â€”<code>stb_image</code></li>
<li>è·å–åƒç´ çš„æ•°ç»„ï¼Œç„¶åä¼ åˆ°æ˜¾å­˜ä¸­â€”â€”OpenGL</li>
<li>é€šè¿‡ç€è‰²å™¨æ¥è¯»å–çº¹ç†ï¼Œå¹¶è®¡ç®—å‡ºçœŸæ­£çš„åƒç´ å€¼â€”â€”åƒç´  / ç‰‡æ®µç€è‰²å™¨ï¼ˆç»‘å®šçº¹ç†ï¼‰</li>
<li>åœ¨ OpenGL ä¸­ï¼Œç”¨ slots æ¥ç»‘å®šçº¹ç†ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç»‘å®šå¤šä¸ªçº¹ç†<ul>
<li>åœ¨ Windows ä¸Šæœ‰ 32 ä¸ª slots</li>
<li>åœ¨ç§»åŠ¨è®¾å¤‡ï¼ŒAndroid æˆ– IOS ä¸Šå¯èƒ½ä¼šæœ‰ 8 ä¸ª slots</li>
</ul>
</li>
<li>OpenGL åŠ è½½çº¹ç†æ˜¯ä»å·¦ä¸‹è§’å¼€å§‹ï¼Œå³å·¦ä¸‹è§’çš„åæ ‡æ˜¯<code>(0, 0)</code>ï¼Œæ­£å¸¸åŠ è½½çš„å›¾ç‰‡æ˜¯ä»å·¦ä¸Šè§’å¼€å§‹éå†ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡åéœ€è¦å‚ç›´ç¿»è½¬</li>
<li>çº¹ç†åæ ‡<ul>
<li>æŒ‡å®šæ¯ä¸ªé¡¶ç‚¹å¯¹åº”çš„çº¹ç†æ˜¯ä»€ä¹ˆï¼Œæ ¹æ®é¡¶ç‚¹å¯¹åº”çš„ <strong> çº¹ç†åæ ‡ </strong> è¿›è¡Œé‡‡æ ·</li>
<li>ç‰‡æ®µç€è‰²å™¨ä¼šæ ¹æ®è¦æ¸²æŸ“çš„åƒç´ çš„ä½ç½®ï¼Œè¿›è¡Œæ’å€¼è®¡ç®—å…·ä½“çš„é¢œè‰²å€¼</li>
</ul>
</li>
</ul>
</li>
<li>æ··åˆ<ul>
<li>Blending determies how we combine our output color with what is already in our target buffer<ul>
<li>Output: the color we output from our fragment shader ä»ç‰‡æ®µç€è‰²å™¨ä¸­è¾“å‡ºçš„é¢œè‰² <strong>SRC</strong></li>
<li>Target buffer: the buffer our fragment shader is drawing to å·²ç»å­˜åœ¨çš„ç¼“å†²åŒºä¸Šçš„é¢œè‰² <strong>DEST</strong></li>
</ul>
</li>
<li>å¦‚ä½•æ§åˆ¶æ··åˆ<ul>
<li><code>glEnable</code>ã€<code>glDisable</code></li>
<li><code>glBlendFunc(src, dest)</code><ul>
<li>src: how the src RGBA factor is computed (default is <code>GL_ONE</code>) é»˜è®¤æ˜¯ 1ï¼Œæ¯ä¸ªé€šé“éƒ½æ˜¯å•ç‹¬è®¡ç®—çš„</li>
<li>dest: how the dest RGBA factor is computed (default is <code>GL_ZERO</code>) é»˜è®¤æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯è¯´ src ä¼šè¦†ç›–åˆ° dest ä¸Šé¢</li>
</ul>
</li>
<li><code>glBlendEquation(mode)</code><ul>
<li>mode: how we combine the src and dest colors</li>
<li>Default value is <code>GL_FUNC_ADD</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>æŠ•å½±çŸ©é˜µ<ul>
<li>æŠ•å½±å°±æ˜¯åœ¨å¤šç»´ç©ºé—´ä¸­ç¡®å®šåæ ‡ç³»</li>
<li>å°†åœºæ™¯ä¸­ä¸‰ç»´ç©ºé—´ä¸­çš„åæ ‡è½¬æ¢åˆ° NDCï¼ˆNormalized Device Coordinatesï¼‰ï¼Œå³æ ‡å‡†ç©ºé—´</li>
<li>åœ¨çª—å£ä¸­æ¸²æŸ“çš„å†…å®¹çš„åæ ‡èŒƒå›´å¿…é¡»ä»å·¦åˆ°å³åœ¨ <code>[-1, 1]</code> ä¹‹é—´ï¼Œä»ä¸Šåˆ°ä¸‹åœ¨ <code>[-1, 1]</code> ä¹‹é—´</li>
<li>æŠ•å½±çŸ©é˜µçš„ä½œç”¨å°±æ˜¯å†³å®šåæ ‡ç©ºé—´æ˜¯ä»€ä¹ˆæ ·çš„<ul>
<li>æ— è®ºæ˜¯æ­£äº¤ï¼ˆOrthographicï¼‰å¤„ç†åçš„é¡¶ç‚¹ï¼Œè¿˜æ˜¯é€è§†ï¼ˆPerspectiveï¼‰å¤„ç†åçš„é¡¶ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šæ˜ å°„åˆ°æ ‡å‡†ç©ºé—´ä¸­</li>
</ul>
</li>
</ul>
</li>
<li>è§†å›¾çŸ©é˜µ ç›¸æœºçš„å˜æ¢ï¼ˆä½ç§»å’Œæ–¹å‘ï¼‰</li>
<li>æ¨¡å‹çŸ©é˜µ å¯¹è±¡çš„å˜æ¢ï¼ˆä½ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ï¼ŒTRSï¼‰</li>
<li>ImGui<ul>
<li>æµ‹è¯•æ¡†æ¶<ul>
<li>å£°æ˜å‘¨æœŸ</li>
<li>å°è£… ImGui</li>
</ul>
</li>
</ul>
</li>
<li>æ‰¹æ¸²æŸ“<ul>
<li>åœ¨ä¸€æ¬¡ DrawCall ä¸­æ¸²æŸ“å¤šä¸ªå¯¹è±¡</li>
</ul>
</li>
</ul>
<center>
    <img src="/2024/06/20/58/batch-rendering.jpg">
</center>

<h4 id="çº¹ç†çš„æ‰¹æ¸²æŸ“"><a href="# çº¹ç†çš„æ‰¹æ¸²æŸ“" class="headerlink" title="çº¹ç†çš„æ‰¹æ¸²æŸ“"></a>çº¹ç†çš„æ‰¹æ¸²æŸ“</h4><ul>
<li>é¢œè‰²æ˜¯ uniform å˜é‡å¯ä»¥æ”¾åˆ°é¡¶ç‚¹ç¼“å†²ä¸­ï¼Œä½†æ˜¯ä¸èƒ½æŠŠçº¹ç†æ”¾åˆ°é¡¶ç‚¹ç¼“å†²åŒºä¸­</li>
<li>ä½†æ˜¯å¯ä»¥åƒé¢œè‰²ä¸€æ ·æä¾›çº¹ç†ç´¢å¼•ï¼Œè¿™ä¸ªç´¢å¼•åœ¨æ¸²æŸ“ Quad æ—¶ï¼Œä»é¡¶ç‚¹ç€è‰²å™¨ä¼ åˆ°ç‰‡æ®µç€è‰²å™¨</li>
<li>ç‰‡æ®µç€è‰²å™¨ç”¨ä½œçº¹ç†æ•°ç»„å’Œé‡‡æ ·æ•°ç»„è¿™äº› uniform çš„ç´¢å¼•</li>
</ul>
<p>C++ ä»£ç ä¸­å®šä¹‰</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (x, y, x) è¡¨ç¤ºåæ ‡</span></span><br><span class="line"><span class="comment">// (r, g, b, a) è¡¨ç¤ºé¢œè‰²</span></span><br><span class="line"><span class="comment">// (u, v) è¡¨ç¤ºçº¹ç†</span></span><br><span class="line"><span class="comment">// texture_index å°±æ˜¯ä¸Šé¢è¯´çš„çº¹ç†ç´¢å¼•ï¼Œå¯¹åº”çº¹ç†æ§½ä½</span></span><br><span class="line"><span class="type">float</span> vertices[] = &#123;</span><br><span class="line">  x, y, z, r, g, b, a, u, v, texture_index_1,</span><br><span class="line">  ...</span><br><span class="line">  x, y, z, r, g, b, a, u, v, texture_index_2,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Shader ä¸­çš„å®šä¹‰</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vertex.shader</span></span><br><span class="line"><span class="keyword">layout</span> (<span class="keyword">location</span> = <span class="number">0</span>) <span class="keyword">in</span> <span class="type">vec3</span> position;</span><br><span class="line"><span class="keyword">layout</span> (<span class="keyword">location</span> = <span class="number">1</span>) <span class="keyword">in</span> <span class="type">vec4</span> color;</span><br><span class="line"><span class="keyword">layout</span> (<span class="keyword">location</span> = <span class="number">2</span>) <span class="keyword">in</span> <span class="type">vec2</span> texCoord;</span><br><span class="line"><span class="keyword">layout</span> (<span class="keyword">location</span> = <span class="number">3</span>) <span class="keyword">in</span> <span class="type">float</span> texIndex;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">out</span> <span class="type">vec4</span> _color;</span><br><span class="line"><span class="keyword">out</span> <span class="type">vec2</span> _texCoord;</span><br><span class="line"><span class="keyword">out</span> <span class="type">float</span> _texIndex;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fragment.shader</span></span><br><span class="line"><span class="keyword">layout</span> (<span class="keyword">location</span> = <span class="number">0</span>) <span class="keyword">out</span> <span class="type">vec4</span> color;</span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="type">sampler2D</span> textureSamplers[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> <span class="type">vec4</span> _color;</span><br><span class="line"><span class="keyword">in</span> <span class="type">vec2</span> _texCoord;</span><br><span class="line"><span class="keyword">in</span> <span class="type">float</span> _texIndex;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> <span class="keyword">index</span> = <span class="type">int</span>(_texIndex);</span><br><span class="line">  color = <span class="built_in">texture</span>(textureSamplers[<span class="keyword">index</span>], _texCoord); <span class="comment">// æ ¹æ®ç´¢å¼•è¿›è¡Œé‡‡æ ·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°†çº¹ç†å’Œæ§½ç»‘å®šï¼Œåˆ©ç”¨ uniform ä¼ é€’æ•°æ®åˆ° shader</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">glBindTextureUnit</span>(<span class="number">0</span>, texture1);</span><br><span class="line"><span class="built_in">glBindTextureUnit</span>(<span class="number">1</span>, texture2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> loc = <span class="built_in">glGetUniformLocation</span>(shader-&gt;<span class="built_in">GetRenderId</span>(), <span class="string">&quot;textureSamplers&quot;</span>);</span><br><span class="line"><span class="type">int</span> samplers[<span class="number">2</span>] = &#123; <span class="number">0</span>, <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">glUniform1iv</span>(loc, <span class="number">2</span>, samplers);</span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨æ€é¡¶ç‚¹ç¼“å†²"><a href="# åŠ¨æ€é¡¶ç‚¹ç¼“å†²" class="headerlink" title="åŠ¨æ€é¡¶ç‚¹ç¼“å†²"></a>åŠ¨æ€é¡¶ç‚¹ç¼“å†² </h4><p> é¢„å…ˆåˆ†é…å¥½æœ€å¤§çš„é¡¶ç‚¹ç¼“å†²åŒºçš„å¤§å°ï¼ˆæ¯”å¦‚ 1KBï¼‰</p>
<ul>
<li>å°†é¡¶ç‚¹æ•°ç»„ç”¨ç»“æ„åŒ–çš„æ–¹å¼è¡¨ç¤º</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Vertex</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">float</span> Position[<span class="number">3</span>];</span><br><span class="line">  <span class="type">float</span> Color[<span class="number">4</span>];</span><br><span class="line">  <span class="type">float</span> TexCoords[<span class="number">2</span>];</span><br><span class="line">  <span class="type">float</span> TexId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç»‘å®šç¼“å†²æ•°æ®æ—¶ä½¿ç”¨ <code>GL_DYNAMIC_DRAW</code> ç±»å‹</li>
<li>ç»‘å®šé¡¶ç‚¹å±æ€§æ—¶ <code>offset</code> ä½¿ç”¨å†…ç½®å‡½æ•° <code>offsetof</code> æ¥ç¡®å®šæ¯ç§æ•°æ®ç±»å‹çš„åç§»é‡</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">glBufferData</span>(GL_ARRAY_BUFFER, <span class="built_in">sizeof</span>(Vertex) * <span class="number">1000</span>, <span class="literal">nullptr</span>, GL_DYNAMIC_DRAW);</span><br><span class="line">...</span><br><span class="line"><span class="built_in">glVertexAttribPointer</span>(<span class="number">0</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="built_in">sizeof</span>(Vertex), (<span class="type">const</span> <span class="type">void</span>*)<span class="built_in">offsetof</span>(Vertex, Position));</span><br><span class="line"><span class="built_in">glVertexAttribPointer</span>(<span class="number">1</span>, <span class="number">4</span>, GL_FLOAT, GL_FALSE, <span class="built_in">sizeof</span>(Vertex), (<span class="type">const</span> <span class="type">void</span>*)<span class="built_in">offsetof</span>(Vertex, Color));</span><br><span class="line"><span class="built_in">glVertexAttribPointer</span>(<span class="number">2</span>, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="built_in">sizeof</span>(Vertex), (<span class="type">const</span> <span class="type">void</span>*)<span class="built_in">offsetof</span>(Vertex, TexCoords));</span><br><span class="line"><span class="built_in">glVertexAttribPointer</span>(<span class="number">3</span>, <span class="number">1</span>, GL_FLOAT, GL_FALSE, <span class="built_in">sizeof</span>(Vertex), (<span class="type">const</span> <span class="type">void</span>*)<span class="built_in">offsetof</span>(Vertex, TexId));</span><br></pre></td></tr></table></figure>

<ul>
<li>åŠ¨æ€ç»‘å®šé¡¶ç‚¹ç¼“å†²</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ª quad éœ€è¦å››ä¸ªç‚¹</span></span><br><span class="line"><span class="function">std::array&lt;Vertex, 4&gt; <span class="title">CreateQuad</span><span class="params">(<span class="type">float</span> x, <span class="type">float</span> y, <span class="type">float</span> texId)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Vertex v0;</span><br><span class="line">  ...</span><br><span class="line">  Vertex v1;</span><br><span class="line">  ...</span><br><span class="line">  Vertex v2;</span><br><span class="line">  ...</span><br><span class="line">  Vertex v3;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">return</span> &#123; v0, v1, v2, v3 &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> q0 = <span class="built_in">CreateQuad</span>(<span class="number">-1.5f</span>, <span class="number">-0.5f</span>, <span class="number">0.0f</span>);</span><br><span class="line"><span class="keyword">auto</span> q1 = <span class="built_in">CreateQuad</span>(<span class="number">0.5f</span>, <span class="number">-0.5f</span>, <span class="number">1.0f</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å†…å­˜æ‹·è´çš„æ–¹å¼ç›´æ¥å°† `std::array` ä¸­çš„å†…å®¹æ‹·è´åˆ°ä¸€ç»´æ•°ç»„ä¸­</span></span><br><span class="line">Vertex vertices[<span class="number">8</span>];</span><br><span class="line"><span class="built_in">memcpy</span>(vertices, q0.<span class="built_in">data</span>(), q0.<span class="built_in">size</span>() * <span class="built_in">sizeof</span>(Vertex));</span><br><span class="line"><span class="built_in">memcpy</span>(vertices + q0.<span class="built_in">size</span>(), q1.<span class="built_in">data</span>(), q0.<span class="built_in">size</span>() * <span class="built_in">sizeof</span>(Vertex));</span><br><span class="line">...</span><br><span class="line"><span class="built_in">glBufferSubData</span>(GL_ARRAY_BUFFER, <span class="number">0</span>, <span class="built_in">sizeof</span>(vertices), vertices);</span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨æ€ç´¢å¼•ç¼“å†²"><a href="# åŠ¨æ€ç´¢å¼•ç¼“å†²" class="headerlink" title="åŠ¨æ€ç´¢å¼•ç¼“å†²"></a>åŠ¨æ€ç´¢å¼•ç¼“å†²</h4><ul>
<li>é¦–å…ˆç¡®å®šç»˜åˆ¶çš„æœ€å¤§çš„ Quad çš„æ•°é‡<code>maxQuadCount</code></li>
<li>ç”± <code>maxQuadCount</code> ç¡®å®šé¡¶ç‚¹æ•°é‡ï¼ˆ<code>maxQuadCount * 4</code>ï¼‰å’Œç´¢å¼•æ•°é‡ï¼ˆ<code>maxQuadCount * 6</code>ï¼‰</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">uint32_t</span> indices[maxQuadCount * <span class="number">6</span>];</span><br><span class="line"><span class="type">uint32_t</span> offset = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; maxQuadCount * <span class="number">6</span>; i += <span class="number">6</span>)</span><br><span class="line">&#123;</span><br><span class="line">  indices[i + <span class="number">0</span>] = <span class="number">0</span> + offset;</span><br><span class="line">  indices[i + <span class="number">1</span>] = <span class="number">1</span> + offset;</span><br><span class="line">  indices[i + <span class="number">2</span>] = <span class="number">2</span> + offset;</span><br><span class="line"></span><br><span class="line">  indices[i + <span class="number">3</span>] = <span class="number">2</span> + offset;</span><br><span class="line">  indices[i + <span class="number">4</span>] = <span class="number">3</span> + offset;</span><br><span class="line">  indices[i + <span class="number">5</span>] = <span class="number">0</span> + offset;</span><br><span class="line"></span><br><span class="line">  offset += <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ›´æ”¹ <code>CreateQuad</code> å‡½æ•°ï¼Œä¼ å…¥é¢„å…ˆå®šä¹‰å¥½å¤§å°çš„é¡¶ç‚¹æ•°æ®ç»“æ„æ•°ç»„ï¼Œå¦‚<code>std::array&lt;Vertex, 1000&gt;</code>ï¼ŒåŒæ—¶å¢åŠ é¡¶ç‚¹ç´¢å¼•æ•°é‡</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Vertex* <span class="title">CreateQuad</span><span class="params">(Vertex* target, <span class="type">float</span> x, <span class="type">float</span> y, <span class="type">float</span> textureId)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  target-&gt;Position = &#123; x, y, <span class="number">0.0f</span> &#125;;</span><br><span class="line">  target-&gt;Color = &#123; <span class="number">0.18f</span>, <span class="number">0.6f</span>, <span class="number">0.96f</span>, <span class="number">1.0f</span> &#125;;</span><br><span class="line">  target-&gt;TexCoors = &#123; <span class="number">0.0f</span>, <span class="number">0.0f</span> &#125;;</span><br><span class="line">  target-&gt;TexId = textureId;</span><br><span class="line">  target++;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> indexCount = <span class="number">0</span></span><br><span class="line">std::array&lt;Vertex, <span class="number">1000</span>&gt; vertices;</span><br><span class="line">Vertex* buffer = vertices.<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">0</span>; y &lt; <span class="number">5</span>; y++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">0</span>; x &lt; <span class="number">5</span>; x++)</span><br><span class="line">  &#123;</span><br><span class="line">    buffer = <span class="built_in">CreateQuad</span>(buffer, x, y, (x + y) % <span class="number">2</span>);</span><br><span class="line">    indexCount += <span class="number">6</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">glBufferSubData</span>(GL_ARRAY_BUFFER, <span class="number">0</span>, vertices.<span class="built_in">size</span>() * <span class="built_in">sizeof</span>(Vertex), vertices.<span class="built_in">data</span>());</span><br><span class="line">...</span><br><span class="line"><span class="built_in">glDrawElements</span>(GL_TRIANGLE, indexCount, GL_UNSIGNED_INT, <span class="literal">nullptr</span>);</span><br></pre></td></tr></table></figure>

<h3 id="APIs"><a href="#APIs" class="headerlink" title="APIs"></a>APIs</h3><ul>
<li><p><code>glGenBuffers</code>: Generate buffer object names ç”Ÿæˆç¼“å†²åŒºçš„æ ‡è¯†</p>
<ul>
<li><code>n</code>: Specifies the number of buffer object names to be generated éœ€è¦ç¼“å†²åŒºæ ‡è¯†çš„æ•°é‡</li>
<li><code>buffers</code>: Specifies an array in which the generated buffer object names are stored ç”¨äºå­˜æ”¾ç¼“å†²åŒºæ ‡è¯†</li>
</ul>
</li>
<li><p><code>glBindBuffer</code>ï¼š Bind a named buffer object ç»‘å®šç¼“å†²åŒºæ ‡è¯†çš„å¯¹è±¡ç±»å‹</p>
<p><code>glBindBuffer</code> binds a buffer object to the specified buffer binding point. Calling <code>glBindBuffer</code> with target set to one of the accepted symbolic constants and buffer set to the name of a buffer object binds that buffer object name to the target. If no buffer object with name buffer exists, one is created with that name. When a buffer object is bound to a target, the previous binding for that target is automatically broken.<br><code>glBindBuffer</code>å‡½æ•°å°†ç¼“å†²å¯¹è±¡ç»‘å®šåˆ° OpenGL ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ï¼Œè°ƒç”¨ <code>glBindBuffer</code> å‡½æ•°ï¼Œéœ€è¦å°† target è®¾ç½®ä¸ºä¸€ä¸ªç¬¦å·å¸¸é‡ï¼ˆæŒ‡å®šç¼“å†²å¯¹è±¡çš„ç±»å‹ï¼‰ï¼Œå°† buffer è®¾ç½®ä¸ºç¼“å†²å¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œè¿™æ ·å°±å°†ç¼“å†²å¯¹è±¡å’Œæ ‡è¯†ç¬¦è¿›è¡Œç»‘å®šäº†ã€‚å¦‚æœæ ‡è¯†ç¬¦æ²¡æœ‰å…³è”ç¼“å†²å¯¹è±¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªç¼“å†²å¯¹è±¡ã€‚å½“ç¼“å†²å¯¹è±¡å·²ç»ç¡®å®šå¥½å¯¹è±¡ç±»å‹ï¼Œä¹‹å‰ç»‘å®šçš„ç±»å‹å°±ä¼šå¤±æ•ˆ</p>
<p>Buffer object names are unsigned integers. The value zero is reserved, but there is no default buffer object for each buffer object target. Instead, buffer set to zero effectively unbinds any buffer object previously bound, and restores client memory usage for that buffer object target (if supported for that target). Buffer object names and the corresponding buffer object contents are local to the shared object space of the current GL rendering context; two rendering contexts share buffer object names only if they explicitly enable sharing between contexts through the appropriate GL windows interfaces functions.<br>å› ä¸ºç¼“å†²åŒºå¯¹è±¡æ ‡è¯†ç¬¦æ˜¯æ— ç¬¦å·ç±»å‹çš„æ•´æ•°ï¼ˆéè´Ÿæ•´æ•°ï¼‰ï¼Œå¦‚æœæ ‡è¯†ç¬¦æ˜¯ 0 æ„å‘³ç€ç¼“å†²åŒºå¯¹è±¡ç±»å‹æ²¡æœ‰ç»‘å®šä»»ä½•ç¼“å†²åŒºå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥å°† buffer å‚æ•°è®¾ç½®ä¸º 0 è¡¨ç¤ºä»ç¼“å†²åŒºå¯¹è±¡ç±»å‹å’Œç¼“å†²åŒºè§£ç»‘ï¼ŒåŒæ—¶ä¹Ÿä¼šæ¸…é™¤åŸæ¥ç¼“å†²åŒºä¸­çš„å†…å®¹ã€‚</p>
<ul>
<li><code>target</code>: Specifies the target to which the buffer object is bound<ul>
<li><code>GL_ARRAY_BUFFER</code>: Vertex attributes</li>
<li><code>GL_ATOMIC_COUNTER_BUFFER</code>: Atomic counter storage</li>
<li><code>GL_COPY_READ_BUFFER</code>: Buffer copy source</li>
<li><code>GL_COPY_WRITE_BUFFER</code>: Buffer copy destination</li>
<li><code>GL_DISPATCH_INDIRECT_BUFFER</code>: Indirect compute dispatch commands</li>
<li><code>GL_DRAW_INDIRECT_BUFFER</code>: Indirect command arguments</li>
<li><code>GL_ELEMENT_ARRAY_BUFFER</code>: Vertex array indices</li>
<li><code>GL_PIXEL_PACK_BUFFER</code>: Pixel read target</li>
<li><code>GL_PIXEL_UNPACK_BUFFER</code>: Texture data source</li>
<li><code>GL_QUERY_BUFFER</code>: Query result buffer</li>
<li><code>GL_SHADER_STORAGE_BUFFER</code>: Read-write storage for shaders</li>
<li><code>GL_TEXTURE_BUFFER</code>: Texture data buffer</li>
<li><code>GL_TRANSFORM_FEEDBACK_BUFFER</code>: Transform feedback buffer</li>
<li><code>GL_UNIFORM_BUFFER</code>: Uniform block storage</li>
</ul>
</li>
<li><code>buffer</code>: Specifies the name of a buffer object</li>
</ul>
</li>
<li><p><code>glBufferData</code>: ç”¨æ¥æŠŠç”¨æˆ·å®šä¹‰çš„æ•°æ®å¤åˆ¶åˆ°å½“å‰ç»‘å®šç¼“å†²çš„å‡½æ•°</p>
<ul>
<li><code>GLenum target</code>: ç›®æ ‡ç¼“å†²çš„ç±»å‹</li>
<li><code>GLsizeiptr size</code>: ä¼ è¾“æ•°æ®çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œä¸€èˆ¬ç”¨ <code>sizeof()</code> å‡½æ•°</li>
<li><code>const void * data</code>: å®é™…æ•°æ®</li>
<li><code>GLenum usage</code>: æ˜¾å¡å¦‚ä½•ç®¡ç†ç»™å®šçš„æ•°æ®<ul>
<li><code>GL_STATIC_DRAW</code>: æ•°æ®ä¸ä¼šæˆ–å‡ ä¹ä¸ä¼šæ”¹å˜</li>
<li><code>GL_DYNAMIC_DRAW</code>: æ•°æ®ä¼šè¢«æ”¹å˜å¾ˆå¤š</li>
<li><code>GL_STREAM_DRAW</code>: æ•°æ®æ¯æ¬¡ç»˜åˆ¶æ—¶éƒ½ä¼šæ”¹å˜</li>
</ul>
</li>
</ul>
</li>
<li><p><code>glVertexAttribPointer</code>: å°† CPU çš„æ•°ç»„ç¼“å†²åŒºç»‘å®šåˆ° GPU çš„é¡¶ç‚¹ç¼“å†²åŒº</p>
<ul>
<li><code>GLuint index</code>: Specifies the index of the generic vertex attribute to be modified é¡¶ç‚¹å±æ€§çš„ä½ç½®</li>
<li><code>GLint size</code>: Specifies the number of components per generic vertex attribute. Must be 1, 2, 3, 4. Additionally, the symbolic constant <code>GL_BGRA</code> is accepted by <code>glVertexAttribPointer</code>. The initial value is 4 é¡¶ç‚¹æ¯ä¸ªå±æ€§çš„å…ƒç´ æ•°é‡ï¼Œä¸€å®šæ˜¯ 1ï¼Œ2ï¼Œ3ï¼Œ4 ä¸­çš„ä¸€ä¸ªæ•°ã€‚<del>å½“ <code>type</code> ä¸º<code>GL_BGRA</code>æ—¶ï¼Œåˆå§‹å€¼æ˜¯ 4</del></li>
<li><code>GLenum type</code>: Specifies the data type of each component in the array. é¡¶ç‚¹æ¯ä¸ªå±æ€§çš„å…ƒç´ çš„æ•°æ®ç±»å‹æšä¸¾</li>
<li><code>GLboolean normalized</code>: Specifies whether fixed-point data values should be normalized (<code>GL_TRUE</code>) or converted directly as fixed-point values (<code>GL_FALSE</code>) when they are accessed å¦‚æœè®¾ç½®ä¸º <code>GL_TRUE</code>ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«æ˜ å°„åˆ°<code>[0, 1]</code> ä¹‹é—´ï¼ˆå¯¹äºæœ‰ç¬¦å·ç±»å‹çš„æ•°æ®æ˜¯ <code>[-1, 1]</code> ä¹‹é—´ï¼‰</li>
<li><code>GLsizei stride</code>: Specifies the byte offset between consecutive generic vertex attributes. If strideâ€‹ is 0, the generic vertex attributes are understood to be tightly packed in the array. The initial value is 0 åœ¨é¡¶ç‚¹è‹¥å¹²å±æ€§ä¸­ä¸¤ä¸ªç›¸åŒå±æ€§ä¹‹é—´çš„æ­¥é•¿ï¼Œå¦‚æœæ­¥é•¿æ˜¯ 0</li>
<li><code>const void * pointer</code>: Specifies a offset of the first component of the first generic vertex attribute in the array in the data store of the buffer currently bound to the <code>GL_ARRAY_BUFFER</code> target. The initial value is 0. æ¯ä¸ªé¡¶ç‚¹å±æ€§ç›¸å¯¹äºèµ·å§‹å±æ€§çš„åç§»é‡çš„æŒ‡é’ˆçš„ä½ç½®</li>
</ul>
</li>
<li><p><code>glGetError</code>: è¿”å›é”™è¯¯æ ‡å¿—çš„å€¼ã€‚æ¯ä¸ªå¯æ£€æµ‹çš„é”™è¯¯éƒ½åˆ†é…æœ‰æ•°å­—ä»£ç å’Œç¬¦å·åç§°ã€‚å‘ç”Ÿé”™è¯¯æ—¶ï¼Œé”™è¯¯æ ‡å¿—å°†è®¾ç½®ä¸ºç›¸åº”çš„é”™è¯¯ä»£ç å€¼ã€‚åœ¨è°ƒç”¨ <code>glGetError</code>ï¼ˆè¿”å›é”™è¯¯ä»£ç ï¼‰ä¹‹å‰ï¼Œä¸ä¼šè®°å½•å…¶ä»–é”™è¯¯ï¼Œå¹¶å°†æ ‡å¿—é‡ç½®ä¸º<code>GL_NO_ERROR</code>ã€‚å¦‚æœå¯¹<code>glGetError</code> çš„è°ƒç”¨è¿”å› <code>GL_NO_ERROR</code>ï¼Œåˆ™è‡ªä¸Šæ¬¡è°ƒç”¨<code>glGetError</code> æˆ–è‡ª GL åˆå§‹åŒ–ä»¥æ¥ï¼Œæ²¡æœ‰å¯æ£€æµ‹åˆ°çš„é”™è¯¯</p>
</li>
<li><p><code>glGenTextures</code>: generate texture names</p>
<p><code>glGenTextures</code> returns n texture names in textures. There is no guarantee that the names form a contiguous set of integers; however, it is guaranteed that none of the returned names was in use immediately before the call to <code>glGenTextures</code> èƒ½å¤Ÿä¿è¯åœ¨è°ƒç”¨ <code>glGenTextures</code> å‰è¿”å›çš„æ ‡è¯†ç¬¦æ˜¯æ²¡æœ‰è¢«ç”¨è¿‡çš„</p>
<p>The generated textures have no dimensionality; they assume the dimensionality of the texture target to which they are first bound ç”Ÿæˆçš„çº¹ç†æ˜¯æ²¡æœ‰ç»´åº¦çš„ï¼Œå‡å®šçº¹ç†çš„ç»´åº¦æ˜¯ç¬¬ä¸€æ¬¡ç»‘å®šçš„ç»´åº¦ï¼ˆä¸æ˜¯å¾ˆç†è§£ï¼‰</p>
<p>Texture names returned by a call to <code>glGenTextures</code> are not returned by subsequent calls, unless they are first deleted with <code>glDeleteTextures</code> è¿ç»­è°ƒç”¨ <code>glGenTextures</code> ä¸ä¼šè¿”å›è¡¨ç¤ºç¬¦äº†ï¼Œé™¤éå…ˆè°ƒç”¨ <code>glDeleteTextures</code> åˆ é™¤çº¹ç†</p>
</li>
<li><p><code>glBindTexture</code>ï¼š å°†ä¸€ä¸ªçº¹ç†æ ‡è¯†ç¬¦ç»‘å®šåˆ°ä¸€ä¸ªçº¹ç†å¯¹è±¡ä¸Š<br>Texture names and the corresponding texture contents are local to the shared object space of the current GL rendering context; two rendering contexts share texture names only if they explicitly enable sharing between contexts through the appropriate GL windows interfaces functions. å¯¹äºå½“å‰çš„ GL æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­çš„å…±äº«å¯¹è±¡ç©ºé—´ï¼Œçº¹ç†åç§°ä»¥åŠå®ƒä»¬å¯¹åº”çš„çº¹ç†å†…å®¹æ˜¯å±€éƒ¨çš„ï¼›åªæœ‰åœ¨æ˜¾å¼å¼€å¯ä¸Šä¸‹æ–‡ä¹‹é—´çš„å…±äº«ï¼Œä¸¤ä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡æ‰å¯ä»¥å…±äº«çº¹ç†åç§°</p>
</li>
<li><p><code>glTexParameteri</code></p>
</li>
<li><p><code>glTexImage2D</code></p>
</li>
<li><p><code>glActiveTexture</code></p>
</li>
<li><p><code>glClear</code></p>
<ul>
<li>ä¸è°ƒç”¨ <code>glClear</code> çš„è¯ï¼Œä¸‹ä¸€å¸§çš„å†…å®¹ä¼šå’Œä¸Šä¸€å¸§çš„å†…å®¹é‡å åœ¨ä¸€èµ·ï¼Œä¸Šä¸€å¸§çš„ç‰©ä½“è¿˜åœ¨åŸæ¥çš„åœ°æ–¹</li>
<li><code>glClearColor</code><ul>
<li>æŒ‡å®šåˆ·æ–°é¢œè‰²ç¼“å†²åŒºæ—¶æ‰€ç”¨çš„é¢œè‰²</li>
<li><code>glClearColor</code>åªæ˜¯è®¾ç½®ç¼“å†²åŒºé¢œè‰²ï¼Œå¹¶ä¸ä¸ä¼šæ¸…é™¤ç¼“å†²åŒºçš„é¢œè‰²ï¼Œéœ€è¦åœ¨è®¾ç½®å¥½é¢œè‰²ä¹‹åè°ƒç”¨ <code>glClear</code> æ‰ä¼šåˆ·æ–°ç¼“å†²åŒºçš„é¢œè‰²</li>
<li><code>glClearColor</code>å¹¶ä¸æ˜¯å¿…é¡»çš„</li>
</ul>
</li>
</ul>
</li>
<li><p><code>glUniform1iv</code></p>
</li>
</ul>

        </div>

        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2024/06/19/57/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Lua é—®é¢˜</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div id="gitalk-container"></div>
    <script 
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script >

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '0c74e477328e28bacf97',
                    clientSecret: '62fd1a94cf185360ac2d2947665725e2eabf5e8d',
                    repo: 'SilhouettesForYou.github.io',
                    owner: 'SilhouettesForYou',
                    admin: ['SilhouettesForYou'],
                    id: __gitalk__pathname,
                    language: 'zh-Hans'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('false') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



        
    
</div>

            </div>
        
    </div>
</div>

                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2024&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">xiao ming</a>
        </div>
        
        
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        

        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>

</div>

    </div>

    
        <aside class="page-aside">
            
    <div class="post-toc-wrap">
        <div class="post-toc">
            <ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">1.</span> <span class="nav-text">ç›®å½•ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xmake-%20%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">xmake é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Notes"><span class="nav-number">3.</span> <span class="nav-text">Notes</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%B9%E7%90%86%E7%9A%84%E6%89%B9%E6%B8%B2%E6%9F%93"><span class="nav-number">3.1.</span> <span class="nav-text">çº¹ç†çš„æ‰¹æ¸²æŸ“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E9%A1%B6%E7%82%B9%E7%BC%93%E5%86%B2"><span class="nav-number">3.2.</span> <span class="nav-text">åŠ¨æ€é¡¶ç‚¹ç¼“å†² </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%B4%A2%E5%BC%95%E7%BC%93%E5%86%B2"><span class="nav-number">3.3.</span> <span class="nav-text">åŠ¨æ€ç´¢å¼•ç¼“å†²</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#APIs"><span class="nav-number">4.</span> <span class="nav-text">APIs</span></a></li></ol>
        </div>
    </div>


        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/code-copy.js"></script>




<div class="post-scripts">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/toc.js"></script>
    
</div>



<!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-tag-common@0.0.5/js/index.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>
</html>
